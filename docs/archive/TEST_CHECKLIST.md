# ✅ 测试清单

## 🔄 重启服务

```bash
# 停止前端（Ctrl+C）
cd web
npm run dev
```

---

## 📋 功能测试

### 1. Chat 对话页面 (`/chat`)

- [ ] 页面正常显示（不是黑框）
- [ ] 显示加载状态
- [ ] 可以看到模型选择器
- [ ] 可以选择不同的模型
- [ ] 可以输入消息
- [ ] 点击发送后收到回复
- [ ] 流式输出开关工作正常

**测试消息**: "你好，请介绍一下 Go 语言"

**预期**: 2-5秒内收到回复

---

### 2. Agent 模块 (`/agent`)

- [ ] 页面正常显示
- [ ] 可以输入任务
- [ ] 可以点击示例任务
- [ ] 点击"运行 Agent"后显示加载状态
- [ ] **等待 1-2 分钟**后显示结果
- [ ] 结果包含 AI 生成的内容

**测试任务**: "给我写一篇关于 Go 语言的文章"

**预期**: 等待 1-2 分钟，显示文章内容

**注意**: ⏱️ 这个功能需要较长时间，请耐心等待！

---

### 3. RAG 索引 (`/rag` - 索引文档)

- [ ] 切换到"索引文档"标签
- [ ] 可以输入文档内容
- [ ] 点击"开始索引"后显示加载状态
- [ ] 索引成功后显示："成功索引 X 个文档，总计 Y 个文档"
- [ ] **不再显示 undefined**
- [ ] 统计卡片更新

**测试文档**:
```
Go 是一门编程语言，由 Google 开发。

Go 语言具有简洁、高效、并发的特点。

Go 语言适合构建微服务和云原生应用。
```

**预期**: 显示 "成功索引 3 个文档"

---

### 4. RAG 查询 (`/rag` - 查询问答)

- [ ] 切换到"查询问答"标签
- [ ] 可以输入问题
- [ ] 点击"开始查询"后显示加载状态
- [ ] **等待 10-20 秒**后显示结果
- [ ] 显示 AI 回答
- [ ] 显示参考来源（文档列表）
- [ ] **前端正常显示**（不再只在后端有输出）

**测试问题**: "Go 语言有什么特点？"

**预期**: 
- AI 回答基于索引的文档
- 显示 2-3 个参考来源

**注意**: ⏱️ 这个功能需要 10-20 秒，请耐心等待！

---

### 5. Graph 模块 (`/graph`)

- [ ] 页面正常显示
- [ ] 可以输入问题
- [ ] 可以点击示例问题
- [ ] 点击"运行 Graph"后显示加载状态
- [ ] **不再返回 400 错误**
- [ ] 显示多步骤执行过程
- [ ] 显示最终结果

**测试问题**: "如何设计一个高可用的微服务架构？"

**预期**: 
- 显示 3 个步骤（分析、计划、执行）
- 显示最终结果
- 耗时 30-60 秒

**注意**: ⏱️ 这个功能需要 30-60 秒，请耐心等待！

---

## 🐛 常见问题

### Q1: Chat 页面还是黑框？

**检查**:
1. 打开浏览器开发者工具（F12）
2. 查看 Console 标签页的错误
3. 查看 Network 标签页的请求

**可能原因**:
- 后端未运行
- 代理配置未生效（需要重启前端）

**解决**:
```bash
# 确保后端运行
curl http://localhost:8080/api/v1/llm/models

# 重启前端
cd web
npm run dev
```

---

### Q2: Agent 还是超时？

**检查**:
- 是否等待了足够长的时间（1-2 分钟）？
- 后端日志是否显示请求完成？

**如果还是超时**:
```typescript
// 可以进一步增加超时时间
// web/src/api/client.ts
timeout: 180000  // 3 分钟
```

---

### Q3: RAG 索引还是显示 undefined？

**检查**:
1. 前端是否已重启？
2. 浏览器是否刷新了页面？

**验证修复**:
```bash
# 查看前端代码
cat web/src/api/rag.ts | grep "count"
# 应该看到: count: number;
```

---

### Q4: Graph 还是返回 400？

**检查后端日志**:
```
[GIN] ... | 400 | ... | POST "/api/v1/graph/run"
```

**验证修复**:
```bash
# 查看前端代码
cat web/src/api/graph.ts | grep "query"
# 应该看到: query: string;
```

**手动测试**:
```bash
curl -X POST http://localhost:8080/api/v1/graph/run \
  -H "Content-Type: application/json" \
  -d '{"query": "测试问题"}'
```

---

## 📊 测试结果记录

### 测试环境
- 日期: ___________
- 前端版本: ___________
- 后端版本: ___________

### 测试结果

| 功能 | 状态 | 备注 |
|------|------|------|
| Chat 对话 | ⬜ | |
| Agent 执行 | ⬜ | |
| RAG 索引 | ⬜ | |
| RAG 查询 | ⬜ | |
| Graph 执行 | ⬜ | |

### 问题记录

1. ___________________________________________
2. ___________________________________________
3. ___________________________________________

---

## ✅ 全部通过？

如果所有测试都通过了，恭喜！🎉

你的 EinoFlow 已经完全可用了！

### 下一步可以做什么？

1. **尝试更多功能**
   - 测试不同的模型
   - 索引更多文档
   - 尝试复杂的 Agent 任务

2. **性能优化**
   - 使用流式输出
   - 缓存常见问题的答案

3. **功能扩展**
   - 添加用户认证
   - 保存对话历史
   - 导出结果

4. **部署到生产**
   - 构建生产版本
   - 配置 Nginx
   - 设置 HTTPS

---

## 📞 需要帮助？

查看文档：
- `FIXES_ROUND2.md` - 最新修复说明
- `DEBUG_GUIDE.md` - 调试指南
- `web/SETUP.md` - 设置指南

祝测试顺利！🚀
