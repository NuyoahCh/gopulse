# Postman 使用指南

## 导入 Postman Collection

### 方法一：直接导入 JSON 文件

1. 打开 Postman 应用
2. 点击左上角的 **Import** 按钮
3. 选择 **File** 标签
4. 选择项目根目录下的 `postman_collection.json` 文件
5. 点击 **Import** 完成导入

### 方法二：通过 URL 导入

1. 打开 Postman 应用
2. 点击左上角的 **Import** 按钮
3. 选择 **Link** 标签
4. 输入文件路径（如果是共享文件）
5. 点击 **Continue** 和 **Import** 完成导入

## 配置环境变量

1. 导入 Collection 后，你会看到 **EinoVerse API** 文件夹
2. 在 Collection 根目录，点击 **Variables** 标签
3. 配置以下变量：

| 变量名 | 初始值 | 说明 |
|--------|--------|------|
| `base_url` | `http://localhost:8080` | API 服务器地址 |

如果你的服务运行在其他地址或端口，请修改 `base_url` 的值。

## 使用 Collection

### 1. 健康检查

首先测试服务是否正常运行：

- 选择 **健康检查** > **健康检查**
- 点击 **Send** 按钮
- 应该收到 `{"status": "ok", "model_backend": "eino"}` 或 `{"status": "ok", "model_backend": "mock"}` 的响应

### 2. 知识库管理

#### 创建文档
1. 选择 **知识库管理** > **创建文档**
2. 修改请求体中的内容（标题、内容、标签等）
3. 点击 **Send**

#### 搜索文档
1. 选择 **知识库管理** > **搜索文档**
2. 修改查询参数 `q`（搜索关键词）和 `limit`（返回数量）
3. 点击 **Send**

#### 获取文档
1. 选择 **知识库管理** > **获取文档**
2. 将 `:id` 变量替换为实际的文档ID（从创建文档的响应中获取）
3. 点击 **Send**

#### 问答
1. 选择 **知识库管理** > **问答**
2. 修改请求体中的 `question` 字段
3. 点击 **Send**
4. **注意**：此功能需要配置 Eino API Key

### 3. 请假管理

#### 创建请假申请
1. 选择 **请假管理** > **创建请假申请**
2. 修改请求体中的员工信息和请假文本
3. 点击 **Send**
4. **注意**：此功能需要配置 Eino API Key

#### 获取请假申请
1. 选择 **请假管理** > **获取请假申请**
2. 将 `:id` 变量替换为实际的申请ID（从创建申请的响应中获取）
3. 点击 **Send**

#### 审批请假申请
1. 选择 **请假管理** > **审批请假申请**
2. 将 `:id` 变量替换为实际的申请ID
3. 修改请求体中的审批人信息
4. 点击 **Send**
5. **注意**：此功能需要配置 Eino API Key

## 快速测试流程

### 完整流程示例

1. **健康检查**
   - 确认服务正常运行

2. **创建知识库文档**
   ```
   标题: "员工请假制度"
   内容: "员工请假需提前申请，事假需提前3天申请。"
   ```

3. **搜索文档**
   ```
   关键词: "请假"
   ```

4. **问答**
   ```
   问题: "请假需要提前多久申请？"
   ```

5. **创建请假申请**
   ```
   员工ID: "E001"
   员工姓名: "张三"
   主管: "李主管"
   文本: "明天因感冒需要请假一天，工作已交接给王五。"
   ```

6. **获取请假申请**
   - 使用上一步返回的申请ID

7. **审批请假申请**
   - 使用相同的申请ID进行审批

## 常见问题

### 1. 404 错误

- 检查 `base_url` 变量是否正确
- 确认服务是否正在运行
- 检查路由路径是否正确

### 2. 500 错误

- 检查服务日志
- 确认 Eino API Key 是否已配置（如果使用 LLM 功能）
- 检查请求体格式是否正确

### 3. LLM 功能不工作

- 确认已设置环境变量 `EINO_API_KEY`
- 检查 `model_backend` 是否为 `"eino"`（健康检查接口会显示）
- 如果没有配置，服务会使用 Mock 模式，功能受限

## 提示

- 所有需要文档ID或申请ID的请求，请先从创建操作的响应中获取ID
- 建议按照顺序测试各个接口，后面的接口可能依赖前面的结果
- 可以使用 Postman 的环境变量功能，为不同环境（开发、测试、生产）设置不同的 `base_url`

